<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>cells</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2011-12-16 07:19:49 CST"/>
<meta name="author" content="bartuer"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>
<div id="content">

<h1 class="title">cells</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 FAQ (基本问题?) </a>
<ul>
<li><a href="#sec-1_1">1.1 文档本身的维护 </a>
<ul>
<li><a href="#sec-1_1_1">1.1.1 联系这个文档的作者 </a></li>
<li><a href="#sec-1_1_2">1.1.2 查看文档的HTML版本 </a></li>
<li><a href="#sec-1_1_3">1.1.3 内容 </a></li>
</ul>
</li>
<li><a href="#sec-1_2">1.2 数据表格 </a></li>
<li><a href="#sec-1_3">1.3 项目版本仓库 </a></li>
</ul>
</li>
<li><a href="#sec-2">2 数据 </a>
<ul>
<li><a href="#sec-2_1">2.1 Apple 教程 </a></li>
<li><a href="#sec-2_2">2.2 Youtube 频道 </a></li>
<li><a href="#sec-2_3">2.3 iTunes U </a></li>
<li><a href="#sec-2_4">2.4 TED </a></li>
<li><a href="#sec-2_5">2.5 how to site 收集  [0/1] </a></li>
</ul>
</li>
<li><a href="#sec-3">3 development </a>
<ul>
<li><a href="#sec-3_1">3.1 UI design </a>
<ul>
<li><a href="#sec-3_1_1">3.1.1 video meaning editor UI </a></li>
<li><a href="#sec-3_1_2">3.1.2 video tag selector UI </a></li>
<li><a href="#sec-3_1_3">3.1.3 image stream viewer </a></li>
<li><a href="#sec-3_1_4">3.1.4 build desktop application link parts by transition to try video Editor UI </a></li>
</ul>
</li>
<li><a href="#sec-3_2">3.2 audio </a>
<ul>
<li><a href="#sec-3_2_1">3.2.1 combine audio track to video file </a></li>
<li><a href="#sec-3_2_2">3.2.2 split audio track out of video </a></li>
<li><a href="#sec-3_2_3">3.2.3 make lion tts output audio file </a></li>
<li><a href="#sec-3_2_4">3.2.4 tts service [1/7] </a></li>
</ul>
</li>
<li><a href="#sec-3_3">3.3 image </a>
<ul>
<li><a href="#sec-3_3_1">3.3.1 convert video to image stream </a></li>
<li><a href="#sec-3_3_2">3.3.2 empty image stream </a></li>
<li><a href="#sec-3_3_3">3.3.3 merge image sequence into audio track [0/4] </a></li>
<li><a href="#sec-3_3_4">3.3.4 automatic slideshow video making [0/4] </a></li>
</ul>
</li>
<li><a href="#sec-3_4">3.4 video </a>
<ul>
<li><a href="#sec-3_4_1">3.4.1 workflow  [1/2]</a></li>
<li><a href="#sec-3_4_2">3.4.2 HLS tool [3/3] </a>
<ul>
<li><a href="#sec-3_4_2_1">3.4.2.1 huge file upload and download [0/6] </a></li>
</ul>
</li>
<li><a href="#sec-3_4_3">3.4.3 preset of encode according to bandwidth and screen size settings [5/5] </a></li>
<li><a href="#sec-3_4_4">3.4.4 reference movie [2/4] </a></li>
<li><a href="#sec-3_4_5">3.4.5 profile collection [1/3] </a></li>
<li><a href="#sec-3_4_6">3.4.6 setup http streaming server [0/4] </a></li>
<li><a href="#sec-3_4_7">3.4.7 automatically script driven capture [1/2]</a></li>
<li><a href="#sec-3_4_8">3.4.8 video effect and transitions [0/2] </a></li>
<li><a href="#sec-3_4_9">3.4.9 research on overlay </a></li>
</ul>
</li>
<li><a href="#sec-3_5">3.5 deployment </a>
<ul>
<li><a href="#sec-3_5_1">3.5.1 main site at bartuer's linode machine </a></li>
<li><a href="#sec-3_5_2">3.5.2 use Youku as CDN </a></li>
<li><a href="#sec-3_5_3">3.5.3 try amazon GPU cluster farm </a></li>
</ul>
</li>
<li><a href="#sec-3_6">3.6 project maintain </a>
<ul>
<li><a href="#sec-3_6_1">3.6.1 github repository [2/2] </a></li>
<li><a href="#sec-3_6_2">3.6.2 site server data and document [1/1] </a></li>
<li><a href="#sec-3_6_3">3.6.3 setup working network environment [2/7] </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> FAQ (基本问题?) </h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1"><span class="section-number-3">1.1</span> 文档本身的维护 </h3>
<div class="outline-text-3" id="text-1_1">


</div>

<div id="outline-container-1_1_1" class="outline-4">
<h4 id="sec-1_1_1"><span class="section-number-4">1.1.1</span> 联系这个文档的作者 </h4>
<div class="outline-text-4" id="text-1_1_1">

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" />
</colgroup>
<tbody>
<tr><td>姓名</td><td>邮件</td><td>即时工具</td><td>电话</td></tr>
<tr><td>周海涛</td><td>bartuer@gmail.com</td><td>iChat in Bonjour</td><td>13439600330</td></tr>
</tbody>
</table>

</div>

</div>

<div id="outline-container-1_1_2" class="outline-4">
<h4 id="sec-1_1_2"><span class="section-number-4">1.1.2</span> 查看文档的HTML版本 </h4>
<div class="outline-text-4" id="text-1_1_2">

<ul>
<li>
自动生成,不要在HTML做修改
</li>
</ul>
</div>

</div>

<div id="outline-container-1_1_3" class="outline-4">
<h4 id="sec-1_1_3"><span class="section-number-4">1.1.3</span> 内容 </h4>
<div class="outline-text-4" id="text-1_1_3">

<ul>
<li>
这个文档不是用户文档
用户文档在项目的wiki:
<a href="https://github.com/hackist/cells/wiki">https://github.com/hackist/cells/wiki</a>
</li>
<li>
这个文档只记录任务及其理由，包括
<ul>
<li>
任务如何分割
</li>
<li>
时间记录
</li>
<li>
成果连接
</li>
</ul>
</li>
<li>
其它资料和成果的位置
<ul>
<li>
详细的讨论在 doc/discuss 目录下
</li>
<li>
如何去做的参考文章和书籍收集在 doc/reference 目录下
</li>
<li>
如果是数据收集类的任务
<ul>
<li>
成果出现在 data 目录下
</li>
</ul>
</li>
<li>
如果是编程类的任务
<ul>
<li>
为项目本身服务，而且代码很小(几行)，会出现在 bin 目录下
</li>
<li>
为用户服务，有很多文件组成，出现在 src 目录下
</li>
</ul>
</li>
<li>
如果一个记录不属于文档，数据，程序的任何一类
但有一些参考意义，不应丢弃，把它放在 log 目录下
</li>
</ul>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-1_2" class="outline-3">
<h3 id="sec-1_2"><span class="section-number-3">1.2</span> 数据表格 </h3>
<div class="outline-text-3" id="text-1_2">

<ul>
<li>
SQLite3数据库和csv数据在 data 目录下
</li>
<li>
如果有和csv文件同名的db文件
<ul>
<li>
通常这个csv是由db生成的
</li>
<li>
如果db包含多个表，每个表都会生成对应的csv
csv文件名会象这样 database<sub>table</sub>.csv
</li>
<li>
很有可能db也是由其它程序产生的
比如bin/update<sub>spfx</sub> 生成所有data/spfx*.*
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-1_3" class="outline-3">
<h3 id="sec-1_3"><span class="section-number-3">1.3</span> 项目版本仓库 </h3>
<div class="outline-text-3" id="text-1_3">

<ul>
<li>
github
<a href="https://github.com/hackist/cells">https://github.com/hackist/cells</a>
</li>
<li>
git 图形工具
<a href="http://mac.github.com/">http://mac.github.com/</a>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 数据 </h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2_1" class="outline-3">
<h3 id="sec-2_1"><span class="section-number-3">2.1</span> Apple 教程 </h3>
<div class="outline-text-3" id="text-2_1">

</div>

</div>

<div id="outline-container-2_2" class="outline-3">
<h3 id="sec-2_2"><span class="section-number-3">2.2</span> Youtube 频道 </h3>
<div class="outline-text-3" id="text-2_2">

</div>

</div>

<div id="outline-container-2_3" class="outline-3">
<h3 id="sec-2_3"><span class="section-number-3">2.3</span> iTunes U </h3>
<div class="outline-text-3" id="text-2_3">

</div>

</div>

<div id="outline-container-2_4" class="outline-3">
<h3 id="sec-2_4"><span class="section-number-3">2.4</span> TED </h3>
<div class="outline-text-3" id="text-2_4">

<p><a href="http://www.ted.com">http://www.ted.com</a>
</p></div>

</div>

<div id="outline-container-2_5" class="outline-3">
<h3 id="sec-2_5"><span class="section-number-3">2.5</span> <span class="todo TODO"> TODO</span> how to site 收集  [0/1] </h3>
<div class="outline-text-3" id="text-2_5">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-27 Sun 16:00</span></span><br/>
</p><ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> <a href="http://www.maclearning.com">http://www.maclearning.com</a>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> development </h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3_1" class="outline-3">
<h3 id="sec-3_1"><span class="section-number-3">3.1</span> UI design </h3>
<div class="outline-text-3" id="text-3_1">


</div>

<div id="outline-container-3_1_1" class="outline-4">
<h4 id="sec-3_1_1"><span class="section-number-4">3.1.1</span> <span class="todo TODO"> TODO</span> video meaning editor UI </h4>
<div class="outline-text-4" id="text-3_1_1">

</div>

</div>

<div id="outline-container-3_1_2" class="outline-4">
<h4 id="sec-3_1_2"><span class="section-number-4">3.1.2</span> <span class="todo TODO"> TODO</span> video tag selector UI </h4>
<div class="outline-text-4" id="text-3_1_2">

</div>

</div>

<div id="outline-container-3_1_3" class="outline-4">
<h4 id="sec-3_1_3"><span class="section-number-4">3.1.3</span> <span class="todo TODO"> TODO</span> image stream viewer </h4>
<div class="outline-text-4" id="text-3_1_3">

</div>

</div>

<div id="outline-container-3_1_4" class="outline-4">
<h4 id="sec-3_1_4"><span class="section-number-4">3.1.4</span> <span class="todo TODO"> TODO</span> build desktop application link parts by transition to try video Editor UI </h4>
<div class="outline-text-4" id="text-3_1_4">

</div>
</div>

</div>

<div id="outline-container-3_2" class="outline-3">
<h3 id="sec-3_2"><span class="section-number-3">3.2</span> audio </h3>
<div class="outline-text-3" id="text-3_2">


</div>

<div id="outline-container-3_2_1" class="outline-4">
<h4 id="sec-3_2_1"><span class="section-number-4">3.2.1</span> <span class="todo HALT"> HALT</span> combine audio track to video file </h4>
<div class="outline-text-4" id="text-3_2_1">

<ul>
<li>
ffmpeg has serious lost frames problem, it could combine sound,
but video quality is damaged
</li>
<li>
seems the problem due to not use x264 properly, Sorenson
squeeze also has such problem
</li>
<li>
should be fixed after apply encode code from HandBrake
</li>
</ul>
</div>

</div>

<div id="outline-container-3_2_2" class="outline-4">
<h4 id="sec-3_2_2"><span class="section-number-4">3.2.2</span> <span class="done DONE"> DONE</span> split audio track out of video </h4>
<div class="outline-text-4" id="text-3_2_2">

<p>#!/bin/bash
ffmpeg -i $1 -vn -acodec copy $1.`afinfo <i>tmp/sound |head -2|tail -1|cut -d ':' -f 2|sed -e 's</i> //g;s+f$++g;s+WAVE+wav+g;s+MPG3+mp3+g;s+ac-3+ac3+g;s+AIFF+aif+g;s+3gpp+3gp+g'`
</p><ul>
<li>
only extract audio file out is very fast, but convert format
will be very slow, need aac -&gt; wav -&gt; mp3, is there any fast
mp3 encoder?
</li>
<li>
only mp3 can be stream from web
afconvert -v -f AIFF $1 &ndash;data BEI16@44100 $1.aif &amp;&amp; lame
$1.aif $1.mp3
</li>
</ul>
</div>

</div>

<div id="outline-container-3_2_3" class="outline-4">
<h4 id="sec-3_2_3"><span class="section-number-4">3.2.3</span> <span class="done DONE"> DONE</span> make lion tts output audio file </h4>
<div class="outline-text-4" id="text-3_2_3">

<p>#!/bin/sh
say -o /tmp/h.aif -f $1 &amp;&amp; afconvert -v -f m4af -d aac -b 64000 /tmp/h.aif $1.m4a  &amp;&amp; afinfo $1.m4a
1s sound, 20ms generate and compress time, 8k bandwidth
</p></div>

</div>

<div id="outline-container-3_2_4" class="outline-4">
<h4 id="sec-3_2_4"><span class="section-number-4">3.2.4</span> <span class="todo TODO"> TODO</span> tts service [1/7] </h4>
<div class="outline-text-4" id="text-3_2_4">

<ul>
<li>
<b>[X]</b> basic idea
(shell-command "qlmanage -p 2&gt;/dev/null ./doc/bonjour.ting-ting.emlx")
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> http service first
use Safari test it
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> compare install Node.js and uki gems
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> daemon it
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> package it
<ul>
<li>
check OS
</li>
<li>
voice dependency
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> embedded VPN connection?
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> why not make it available on Mac App store?
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3_3" class="outline-3">
<h3 id="sec-3_3"><span class="section-number-3">3.3</span> image </h3>
<div class="outline-text-3" id="text-3_3">


</div>

<div id="outline-container-3_3_1" class="outline-4">
<h4 id="sec-3_3_1"><span class="section-number-4">3.3.1</span> <span class="done DONE"> DONE</span> convert video to image stream </h4>
<div class="outline-text-4" id="text-3_3_1">

<p>#!/bin/bash
mkdir thumb-$1 
ffmpeg -i $1 -r 1 -s qqvga -f image2 thumb-$1/thumb-$1-%04d.png
for f in thumb-$1/*.png; do
convert -quality 80 $f thumb-$1/`basename -s .png $f`.jpg &amp;&amp; rm $f
done
</p><ul>
<li>
take look at handbrake
it build own encoder? 
<ul>
<li>
clone github keep failed
svn mirror?
</li>
<li>
just download the tarball
</li>
</ul>
</li>
<li>
image sample quality
</li>
<li>
it is possible to embedded images into audio stream, it seems
pretty cool bandwidth saving method
<a href="http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/HTTP_Live_Streaming_Metadata_Spec/2/2.html#//apple_ref/doc/uid/TP40010435-CH2-DontLinkElementID_2">http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/HTTP_Live_Streaming_Metadata_Spec/2/2.html#//apple_ref/doc/uid/TP40010435-CH2-DontLinkElementID_2</a>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_3_2" class="outline-4">
<h4 id="sec-3_3_2"><span class="section-number-4">3.3.2</span> <span class="done DONE"> DONE</span> empty image stream </h4>
<div class="outline-text-4" id="text-3_3_2">

<p>just draw some rectangle on client
for audio only case
</p></div>

</div>

<div id="outline-container-3_3_3" class="outline-4">
<h4 id="sec-3_3_3"><span class="section-number-4">3.3.3</span> <span class="todo TODO"> TODO</span> merge image sequence into audio track [0/4] </h4>
<div class="outline-text-4" id="text-3_3_3">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> it is last fall back when bandwidth in not enought
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> it seems better than audio book
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> it can be done with http stream server
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> how to merge this with slide show video making
<ul>
<li>
is it possible to wrap quartz composer into mpeg-2
transport stream packet?
</li>
<li>
the experience will be seamless?
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_3_4" class="outline-4">
<h4 id="sec-3_3_4"><span class="section-number-4">3.3.4</span> <span class="todo TODO"> TODO</span> automatic slideshow video making [0/4] </h4>
<div class="outline-text-4" id="text-3_3_4">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> image pool
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> music pool
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> extend transition library
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> stream video on demand
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3_4" class="outline-3">
<h3 id="sec-3_4"><span class="section-number-3">3.4</span> video </h3>
<div class="outline-text-3" id="text-3_4">


</div>

<div id="outline-container-3_4_1" class="outline-4">
<h4 id="sec-3_4_1"><span class="section-number-4">3.4.1</span> <span class="todo TODO"> TODO</span> workflow  [1/2] &nbsp;&nbsp;&nbsp;<span class="tag"><span class="research">research</span></span></h4>
<div class="outline-text-4" id="text-3_4_1">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-27 Sun 12:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> take look at podcast producer
it has document and tutorial
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> need make video tutorial for self work flow?
<ul>
<li>
should make it as automatically as possible
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_2" class="outline-4">
<h4 id="sec-3_4_2"><span class="section-number-4">3.4.2</span> <span class="todo TODO"> TODO</span> HLS tool [3/3] </h4>
<div class="outline-text-4" id="text-3_4_2">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-12-10 Sat 17:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> project plot
<ul>
<li>
segmenter in commercial software all has serious limitation
<ul>
<li>
have try 
<ul>
<li>
Apple developer tool
</li>
<li>
Final Cut Pro X
</li>
<li>
Sorenson Squeeze
</li>
</ul>
</li>
<li>
OS platform
</li>
<li>
cluster support
</li>
<li>
configure knowledge management
<ul>
<li>
share
</li>
<li>
update
</li>
<li>
tuning
</li>
</ul>
</li>
<li>
customize process or work flow
</li>
</ul>
</li>
<li>
architecture
<ul>
<li>
facility graphic chip can achieve below 10 times
<ul>
<li>
CUDA of Nvidia
</li>
<li>
GPGPU of AMD
</li>
<li>
video sync of Intel 
</li>
<li>
OpenCL of Apple
</li>
</ul>
</li>
<li>
programming to reuse the middle result can achieve about 10 times    
<ul>
<li>
2 screen size x 3 bandwidth x 2 delivery format at least           
</li>
<li>
Final Cut Pro X queue them for encoding on multiple machine        
</li>
<li>
Sorenson seems use middle result
</li>
</ul>
</li>
<li>
cluster method indeed can achieve more than 100 times
<ul>
<li>
now network bandwidth is 1000 times higher than normal encoding rate
</li>
<li>
it is much easier to achieve high performance by programming on
socket than on graphic chip API or OS specific thread model
</li>
</ul>
</li>
</ul>
</li>
<li>
input/output coverage requirement
<ul>
<li>
bandwidth range
<ul>
<li>
cellar
</li>
<li>
3G
</li>
<li>
ADSL
</li>
<li>
WiFi
</li>
</ul>
</li>
<li>
bandwidth grain
<ul>
<li>
2 grade each network
</li>
<li>
only 1 for WiFi network
</li>
</ul>
</li>
<li>
device range
<ul>
<li>
iphone
</li>
<li>
ipad
</li>
<li>
AppleTV
</li>
<li>
WebKit browser
</li>
</ul>
</li>
<li>
multimedia track
<ul>
<li>
video and audio
</li>
<li>
audio and still image
</li>
</ul>
</li>
<li>
container
<ul>
<li>
mp4 for progressive download
</li>
<li>
ts for HLS
</li>
<li>
hinted mov for QuickTime stream server
</li>
</ul>
</li>
<li>
input
<ul>
<li>
QuickTime screen record raw
</li>
<li>
QuickTime screen record export
</li>
</ul>
</li>
<li>
preset reference
(link "data/hls<sub>guild</sub>.csv" 7591)
</li>
</ul>
</li>
<li>
basic encoding and encoder choosing
<ul>
<li>
video
x264 H264 AVR, HandBrake patched version 
</li>
<li>
audio
<ul>
<li>
Chrome can play mp4 with AAC audio?
</li>
<li>
iPhone can play m4v with mp3 audio?
</li>
<li>
choose one most compatible
</li>
<li>
use faac or lame after decision
</li>
</ul>
</li>
<li>
dependency
<ul>
<li>
should balance between supported format and complexity
</li>
<li>
now it is indeed single input and output format
</li>
</ul>
</li>
<li>
platform
<ul>
<li>
at least *nix
</li>
<li>
first only Unix Makefile
</li>
<li>
should works on both 32/64 Mac and 32/64 Linux
</li>
<li>
if need UI component
<ul>
<li>
migrate to XCode project
</li>
<li>
use CMake
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
dependency
<ul>
<li>
should balance between supported formats and complexity
</li>
<li>
now it is indeed single input and output format
</li>
</ul>
</li>
<li>
compilation platform
<ul>
<li>
at least *nix
</li>
<li>
first only Unix Makefile
</li>
<li>
should works on both 32/64 Mac and 32/64 Linux
</li>
<li>
if need UI component
<ul>
<li>
migrate to XCode project
</li>
<li>
use CMake
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<b>[X]</b> prepare test data
<ul>
<li>
prepare sound first
</li>
<li>
progressive download as source of segment
</li>
<li>
5 minutes 800x600 of Mac shared screen
<ul>
<li>
spotlight usage
</li>
<li>
versions
<ul>
<li>
download full size
hb -i -o -e x264 &ndash;x264-preset ultrafast \
&ndash;x264-profile baseline \
-x ref=2:bframes=2:subq=6:mixed-refs=0:weightb=0:8x8dct=0:trellis=0 \
&ndash;x264-tune zerolatency -r 5 -vfr \
&ndash;strict-anamorphic  \
-T -2 -b 183 \
-9 -f mp4 -4 -m
</li>
<li>
stream iPad size 156k/512
</li>
</ul>
</li>
</ul>
</li>
<li>
20 seconds 326x496 of iPhone simulator
<ul>
<li>
webapp usage
</li>
<li>
versions 
<ul>
<li>
download full size
</li>
<li>
stream iPhone version 110k/260
</li>
</ul>
</li>
</ul>
</li>
<li>
20 seconds 512x384 of iPad simulator
<ul>
<li>
reuse content of iPhone one
</li>
<li>
versions
<ul>
<li>
download/progressive full size
</li>
<li>
stream iPad size 156k/512
</li>
<li>
stream iPhone size 110k/260
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<b>[X]</b> segmenter script
<ul>
<li>
try http<sub>streams</sub>
(git-link "~/local/src/encoder/segmenter/http-stream/"
"8f210ef91afe0776f290e9d507a3506f57b74845")
see github.com:hackist/HTTP-Live-Video-Stream-Segmenter-and-Distributor.git
</li>
<li>
scripts
<ul>
<li>
speed okay
<ul>
<li>
audio generate
</li>
<li>
audio encode
</li>
<li>
audio video merge
</li>
<li>
hls split/packet/index
</li>
<li>
video encode speed now is about 100fps, but seems
has seen 200fps speed
</li>
</ul>
</li>
</ul>
</li>
<li>
download version add meta data
</li>
<li>
add meta data to MpegTS packet
</li>
<li>
script to setup record windows
</li>
</ul>
</li>
</ul>

</div>

<div id="outline-container-3_4_2_1" class="outline-5">
<h5 id="sec-3_4_2_1"><span class="section-number-5">3.4.2.1</span> <span class="todo TODO"> TODO</span> huge file upload and download [0/6] </h5>
<div class="outline-text-5" id="text-3_4_2_1">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> mongrel2 solution
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> node.js solution
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> upload client
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> server configure support break recover
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> try cloudfront AWS
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> try new location of linode
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3_4_3" class="outline-4">
<h4 id="sec-3_4_3"><span class="section-number-4">3.4.3</span> <span class="done DONE"> DONE</span> preset of encode according to bandwidth and screen size settings [5/5] </h4>
<div class="outline-text-4" id="text-3_4_3">

<ul>
<li>
<b>[X]</b> profile
(link "doc/encoders.eml" 1)
<ul>
<li>
standard specification
</li>
<li>
profile database 
</li>
<li>
tweak profile for screen capture
</li>
<li>
collect high quality movie's profile
<ul>
<li>
like earthtouch or Apple trailers
</li>
<li>
Final cut has such feature
</li>
</ul>
</li>
<li>
export sample profile from popular transcoder
</li>
</ul>
</li>
<li>
<b>[X]</b> x264
<ul>
<li>
encoder in Handbrake
I think it's result seems much better than MC
</li>
<li>
learn it's algorithm
</li>
<li>
there is H.264 CUDA
</li>
<li>
it can be used in ffmpeg
</li>
</ul>
</li>
<li>
<b>[X]</b> encoder in Final Cut
<ul>
<li>
compressor
<ul>
<li>
AIC -&gt; ResPro
</li>
<li>
they use Main Concept before
</li>
</ul>
</li>
<li>
QuickTime Framework in general
</li>
</ul>
</li>
<li>
<b>[X]</b> hardware accelerated encoder library
<ul>
<li>
CUDA
it is most available now
</li>
<li>
video sync of Intel
</li>
<li>
GPGPU of AMD
</li>
</ul>
</li>
<li>
<b>[X]</b> commercial encoder
<ul>
<li>
Main Concept
it support CUDA, but my card only has 253M memory, that
need at least 512M
</li>
<li>
Squeeze
<ul>
<li>
how to remove 3.6M video's water mark ?
do not need that
</li>
<li>
how could encoder know video should choose static or
motion profile?
indeed there is no such significant difference there
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_4" class="outline-4">
<h4 id="sec-3_4_4"><span class="section-number-4">3.4.4</span> <span class="todo TODO"> TODO</span> reference movie [2/4] </h4>
<div class="outline-text-4" id="text-3_4_4">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-27 Sun 14:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> take look at QuickTime export format
</li>
<li>
<b>[X]</b> javascript control
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> browser native control
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> page structure
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_5" class="outline-4">
<h4 id="sec-3_4_5"><span class="section-number-4">3.4.5</span> <span class="todo TODO"> TODO</span> profile collection [1/3] </h4>
<div class="outline-text-4" id="text-3_4_5">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-12-10 Sat 16:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> from software
<ul>
<li>
squeeze
(link "./data/spfx<sub>single</sub>.csv" 3449)
</li>
<li>
handbrake
</li>
<li>
final cut HLS output
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> from code
<ul>
<li>
http stream
</li>
<li>
ffmpeg
</li>
<li>
x264
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> from document
<ul>
<li>
stream media guide
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_6" class="outline-4">
<h4 id="sec-3_4_6"><span class="section-number-4">3.4.6</span> <span class="todo TODO"> TODO</span> setup http streaming server [0/4] </h4>
<div class="outline-text-4" id="text-3_4_6">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> migrate my server from SF to Tokyo
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> benchmark local and VPS
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> stream audio first
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> HLS segment
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_7" class="outline-4">
<h4 id="sec-3_4_7"><span class="section-number-4">3.4.7</span> <span class="todo TODO"> TODO</span> automatically script driven capture [1/2] &nbsp;&nbsp;&nbsp;<span class="tag"><span class="research">research</span></span></h4>
<div class="outline-text-4" id="text-3_4_7">

<ul>
<li>
<b>[X]</b> is it possible use script driven capture
<ul>
<li>
can make that script downloadable
</li>
<li>
try it, pretty hard, abandon
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> programming API of QuickTime or Capture software
<ul>
<li>
macruby as glue language?
</li>
<li>
have take look at js as system script language on OSX possibility?
</li>
</ul>
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_8" class="outline-4">
<h4 id="sec-3_4_8"><span class="section-number-4">3.4.8</span> <span class="todo TODO"> TODO</span> video effect and transitions [0/2] </h4>
<div class="outline-text-4" id="text-3_4_8">

<ul>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> filter matrixs in CoreImage library
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> quartz composer make video transition
</li>
</ul>
</div>

</div>

<div id="outline-container-3_4_9" class="outline-4">
<h4 id="sec-3_4_9"><span class="section-number-4">3.4.9</span> <span class="todo TODO"> TODO</span> research on overlay </h4>
<div class="outline-text-4" id="text-3_4_9">

<p>it is useful to display two part (keyboard, touch) meanwhile
</p></div>
</div>

</div>

<div id="outline-container-3_5" class="outline-3">
<h3 id="sec-3_5"><span class="section-number-3">3.5</span> deployment </h3>
<div class="outline-text-3" id="text-3_5">


</div>

<div id="outline-container-3_5_1" class="outline-4">
<h4 id="sec-3_5_1"><span class="section-number-4">3.5.1</span> <span class="todo TODO"> TODO</span> main site at bartuer's linode machine </h4>
<div class="outline-text-4" id="text-3_5_1">

</div>

</div>

<div id="outline-container-3_5_2" class="outline-4">
<h4 id="sec-3_5_2"><span class="section-number-4">3.5.2</span> <span class="todo TODO"> TODO</span> use Youku as CDN </h4>
<div class="outline-text-4" id="text-3_5_2">

</div>

</div>

<div id="outline-container-3_5_3" class="outline-4">
<h4 id="sec-3_5_3"><span class="section-number-4">3.5.3</span> <span class="todo TODO"> TODO</span> try amazon GPU cluster farm </h4>
<div class="outline-text-4" id="text-3_5_3">

</div>
</div>

</div>

<div id="outline-container-3_6" class="outline-3">
<h3 id="sec-3_6"><span class="section-number-3">3.6</span> project maintain </h3>
<div class="outline-text-3" id="text-3_6">


</div>

<div id="outline-container-3_6_1" class="outline-4">
<h4 id="sec-3_6_1"><span class="section-number-4">3.6.1</span> <span class="done DONE"> DONE</span> github repository [2/2] </h4>
<div class="outline-text-4" id="text-3_6_1">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-27 Sun 18:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> branch based process
<ul>
<li>
now just commit on master is okay
</li>
</ul>
</li>
<li>
<b>[X]</b> not pull request
</li>
</ul>
</div>

</div>

<div id="outline-container-3_6_2" class="outline-4">
<h4 id="sec-3_6_2"><span class="section-number-4">3.6.2</span> <span class="todo TODO"> TODO</span> site server data and document [1/1] </h4>
<div class="outline-text-4" id="text-3_6_2">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-26 Sat 13:30</span></span><br/>
</p><ul>
<li>
<b>[X]</b> automatically convert this document
</li>
</ul>
</div>

</div>

<div id="outline-container-3_6_3" class="outline-4">
<h4 id="sec-3_6_3"><span class="section-number-4">3.6.3</span> <span class="todo TODO"> TODO</span> setup working network environment [2/7] </h4>
<div class="outline-text-4" id="text-3_6_3">

<p><span class="timestamp-wrapper"><span class="timestamp-kwd">SCHEDULED: </span> <span class="timestamp">2011-11-27 Sun 10:00</span></span><br/>
</p><ul>
<li>
<b>[X]</b> fast network
</li>
<li>
<b>[X]</b> storage
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> service finding
<ul>
<li>
DNS configure
</li>
<li>
bonjour name convention
</li>
</ul>
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> document browser
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> document edit
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> notification
</li>
<li>
<b>[<span style="visibility:hidden;">X</span>]</b> iChat server can save conversation?
<ul>
<li>
can route irc to jabberd?
</li>
<li>
how to integrate with my realtime comments
</li>
<li>
pin idea here, will setup new one when chance coming
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble">
<p class="author"> Author: bartuer
</p>
<p class="date"> Date: 2011-12-16 07:19:49 CST</p>
<p class="creator">HTML generated by org-mode 7.01trans in emacs 23</p>
</div>
</div>
</body>
</html>
